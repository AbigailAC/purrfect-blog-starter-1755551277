@model PurrfectBlog.Models.Post

@{
    ViewBag.Title = Model.Title;
}

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <!-- Post content-->
            <article>
                <!-- Post header-->
                <header class="mb-4">
                    <!-- Post title-->
                    <h1 class="fw-bolder mb-1">@Model.Title</h1>
                    <!-- Post meta content-->
                    <div class="text-muted fst-italic mb-2">
                        Posted on @Model.CreationDate.ToString("MMMM dd, yyyy") by @Model.Author.UserName
                    </div>
                </header>
                <!-- Post content-->
                <section class="mb-5">
                    <p class="fs-5" style="white-space: pre-wrap;">@Model.Content</p>
                </section>
            </article>
            <hr />
            <div class="d-flex justify-content-between">
                @Html.ActionLink("← Back to All Posts", "Index", "Post", null, new { @class = "btn btn-outline-primary" })

                @if (User.Identity.IsAuthenticated && User.Identity.Name == Model.Author.UserName)
                {
                    <div>
                        @Html.ActionLink("Edit", "Edit", new { id = Model.Id }, new { @class = "btn btn-secondary" })
                        <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal">
                            Delete
                        </button>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteModalLabel">Confirm Deletion</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Are you sure you want to permanently delete this post? This action cannot be undone.
                <p class="text-muted mt-2"><strong>Title:</strong> @Model.Title</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                @using (Html.BeginForm("Delete", "Post", new { id = Model.Id }, FormMethod.Post))
                {
                    @Html.AntiForgeryToken()
                    <input type="submit" value="Delete" class="btn btn-danger" />
                }
            </div>
        </div>
    </div>
</div>